databaseChangeLog:
  - logicalFilePath: db/changelogs/FIT-0042-create_tables_passport_address.yaml

  - changeSet:
      id: FIT-0042-1
      author: mel
      changes:
        - tagDatabase:
            tag: create_table_fit_address
        - createTable:
            tableName: fit_address
            columns:
              - column:
                  name: ID
                  type: bigint
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: region
                  type: varchar(255)
              - column:
                  name: city
                  type: varchar(255)
              - column:
                  name: street
                  type: varchar(255)
              - column:
                  name: house_number
                  type: int
              - column:
                  name: apartment_number
                  type: int

  - changeSet:
      id: FIT-0042-2
      author: mel
      changes:
        - tagDatabase:
            tag: create_table_fit_passport
        - createTable:
            tableName: fit_passport
            columns:
              - column:
                  name: ID
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: passport_number
                  type: int
                  constraints:
                    unique: false
                    nullable: false
              - column:
                  name: passport_series
                  type: int
                  constraints:
                    unique: false
                    nullable: false
              - column:
                  name: date_of_issue
                  type: int
              - column:
                  name: authority
                  type: varchar(255)
              - column:
                  name: subdivision_code
                  type: int
              - column:
                  name: address_id
                  type: BIGINT
                  constraints:
                    nullable: false
                    foreignKeyName: fk_fit_passport_address
                    references: fit_address(id)

  - changeSet:
          id: FIT-0042-3
          author: mel
          changes:
            - addColumn:
                tableName: fit_user
                columns:
                  - column:
                      name: passport_id
                      type: BIGINT
                      constraints:
                        nullable: false
                        foreignKeyName: fk_fit_passport
                        references: fit_passport(id)
                  - column:
                      name: address_id
                      type: BIGINT
                      constraints:
                        nullable: false
                        foreignKeyName: fk_fit_address
                        references: fit_address(id)
                  - column:
                      name: photo
                      type: varchar(255)

  - changeSet:
      id: FIT-0042-4
      author: mel
      changes:
        - addColumn:
            tableName: fit_user_aud
            columns:
              - column:
                  name: photo
                  type: varchar(255)
              - column:
                  name: passport_id
                  type: BIGINT
                  constraints:
                    nullable: false
                    foreignKeyName: fk_fit_passport_aud
                    references: fit_passport(id)
              - column:
                  name: address_id
                  type: BIGINT
                  constraints:
                    nullable: false
                    foreignKeyName: fk_fitaddress
                    references: fit_address(id)
